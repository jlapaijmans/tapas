set -ue

# Generate mutation tables, using combinations of parametes. The values 
# are specified in 

kd_in="$pr/data/in/artif-mutpar"
d_out="$pr/data/gen/artif-mutpar"

mkdir $d_out
cd $d_out

s_cross_tab="$pr/scripts/general/cross_tab.py"
s_index_column="$pr/scripts/general/index-column.py"
s_fill_template="$pr/scripts/general/fill_template.py"


# Generate all combinations of params factor, geom_prob, intercept
$s_cross_tab --head 1 $d_in/par/* | \
$s_index_column > combination_indices


#' Output file template
cat >tmpl <<EOF
strand  from  to  factor   geom_prob   intercept 
3       A     G   {factor} {geom_prob} 0
5       C     T   {factor} {geom_prob} 0
3       *     *   0        0.1         {all_intercept}
EOF

# Make TAB-delimited file
sed -r 's/ +/\t/g' tmpl > tmpl.tmp && mv tmpl{.tmp,}

$s_fill_template --output "mut_{index}" tmpl < combination_indices
$s_fill_template --output "test" tmpl < combination_indices


# less mut_1


# vim:ft=sh:tw=80

